<!DOCTYPE html>
<html>
<head>
    {% include 'header.html' %}
    <!-- Bootstrap CSS CDN Link and other styles... -->
</head>
<body>
    <h1 class="text-center mt-4">PI led control</h1>
    <div class="grid-container">
        <div class="light-grid">
            {% for i in range(100) %}
                <div class="light {{ 'selected' if led_states[i] == 'on' else '' }}"
                     id="light{{ i }}"
                     data-led-id="{{ i }}"
                     onclick="toggleLed(this)">
                </div>
            {% endfor %}
        </div>
        <!-- ... other controls ... -->
    </div>

    <script>
        function toggleLed(ledId, element) {
            let status = element.classList.contains('selected') ? 'off' : 'on';
            element.classList.toggle('selected', status === 'on');
            updateLedStatus(ledId, status);
        }

        function updateLedStatus(ledId, status) {
            fetch('/update-led', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: `led_id=${ledId}&status=${status}`
            })
            .then(response => response.json())
            .then(data => console.log(data.message));
        }
    </script>

    <!-- Existing scripts... -->
</body>
</html>
